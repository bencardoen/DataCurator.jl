version: 2.1

jobs:             
  linux: 
    working_directory: /root/project/DataCurator.jl   # Clone into a directory whose name matches your Package.
    docker:
      - image: debian:stable
#     resource_class: xlarge
    steps:
      - run:
            name: Run test
            no_output_timeout: 40m
            command: |
                 apt-get update -y
                 apt-get install wget -y
                 wget https://raw.githubusercontent.com/bencardoen/DataCurator.jl/main/scripts/install_debian.sh -O script.sh && chmod +x script.sh
                 ./script.sh
                 PATH="/opt/julia-1.10.5/bin:$PATH"
                 cd
                 cd test
                 julia --project=. -e 'using DataCurator'
            # apt-get update -y
            # apt-get install wget -y
            # wget https://raw.githubusercontent.com/bencardoen/DataCurator.jl/main/scripts/install_debian.sh -O script.sh && chmod +x script.sh
            # ./script.sh 
      # - run: 
      #     command: |
      #     apt-get update -y
      #     apt-get install wget -y
      #     wget https://raw.githubusercontent.com/bencardoen/DataCurator.jl/main/scripts/install_debian.sh -O script.sh && chmod +x script.sh
      #     ./script.sh 
      #     # Check that script worked
      #     PATH="/opt/julia-1.9.3/bin:$PATH"
      #     cd
      #     cd test
      #     julia --project=. -e 'using DataCurator'
      #     no_output_timeout: 30m
          
workflows:
  test_build:
    jobs:
      #- mac #Circle ci is deprecating the runners for OSS :( 
      - linux
#           requires:
#             - mac
